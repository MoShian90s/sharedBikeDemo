<template>
  <div>
    <el-breadcrumb separator-class="el-icon-arrow-right">
      <el-breadcrumb-item :to="{ path: '/home' }">home</el-breadcrumb-item>
      <el-breadcrumb-item>Bike information</el-breadcrumb-item>
      <el-breadcrumb-item>Bike Map</el-breadcrumb-item>
    </el-breadcrumb>
    <el-card>
      <el-row :gutter="20">
        <el-col :span="10">
          <legend class="lt">&nbsp;bike ID:</legend>
          <el-select v-model="bikeId" filterable placeholder="">
            <el-option v-for="item in bikeids" :key="item.value" :label="item.value" :value="item.value">
            </el-option>
          </el-select>
        </el-col>
        <el-col :span="10">
          <br />
          <el-button type="primary" @click="showdata" >search</el-button>
        </el-col>
      </el-row>
    </el-card>
    <div id="googleMap" style="width:auto;height:600px;"></div>
  </div>
</template>

<script>
  import qs from 'qs'
  import MarkLabel from '../../../../MarkLabel.js'
  export default {
    data() {
      return {
        bikeId: '',
        fake_Coordinates: [],
        bikeids: [],
        flightPlanCoordinates: [{
            lat: 55.816293658188606,
            lng: -4.2885442276001
          },
          {
            lat: 55.816435315383465,
            lng: -4.288490583419802
          },
          {
            lat: 55.8165468323868,
            lng: -4.288404752731325
          },
          {
            lat: 55.816622181532516,
            lng: -4.288340379714968
          },
          {
            lat: 55.81667643282708,
            lng: -4.2882974643707295
          },
          {
            lat: 55.816736711954555,
            lng: -4.288227726936342
          },
          {
            lat: 55.81685124203948,
            lng: -4.288131167411806
          },
          {
            lat: 55.81695672997741,
            lng: -4.2880721588134785
          },
          {
            lat: 55.817080301198146,
            lng: -4.287980963706972
          },
          {
            lat: 55.81721592769601,
            lng: -4.287879039764406
          },
          {
            lat: 55.81733347027848,
            lng: -4.287825395584108
          },
          {
            lat: 55.81745101250588,
            lng: -4.287761022567751
          },
          {
            lat: 55.817607734923435,
            lng: -4.287691285133364
          },
          {
            lat: 55.817743359583,
            lng: -4.287610818862917
          },
          {
            lat: 55.81794830261616,
            lng: -4.2875357170105
          },
          {
            lat: 55.81813214765395,
            lng: -4.287514259338381
          },
          {
            lat: 55.81830092266163,
            lng: -4.287455250740053
          },
          {
            lat: 55.818438492302704,
            lng: -4.287454012755638
          },
          {
            lat: 55.81860425217238,
            lng: -4.287443283919578
          },
          {
            lat: 55.81878077763127,
            lng: -4.287420630726497
          },
          {
            lat: 55.81896461873586,
            lng: -4.287415266308467
          },
          {
            lat: 55.81914845897188,
            lng: -4.287420630726497
          },
          {
            lat: 55.8193533946046,
            lng: -4.287393808636348
          },
          {
            lat: 55.81951010936015,
            lng: -4.287387637922088
          },
          {
            lat: 55.81967586466473,
            lng: -4.287403731176178
          },
          {
            lat: 55.81982655069249,
            lng: -4.2873822735040585
          },
          {
            lat: 55.82000737315552,
            lng: -4.28735008699588
          },
          {
            lat: 55.82016107158837,
            lng: -4.287328629323761
          },
          {
            lat: 55.82033285147131,
            lng: -4.287296442815582
          },
          {
            lat: 55.82049558960821,
            lng: -4.287253527471344
          },
          {
            lat: 55.820664354364546,
            lng: -4.287226705381195
          },
          {
            lat: 55.82081805020215,
            lng: -4.287210612127105
          },
          {
            lat: 55.82096873180652,
            lng: -4.287167696782867
          },
          {
            lat: 55.82111639921261,
            lng: -4.287124781438629
          },
          {
            lat: 55.821294202080345,
            lng: -4.287081866094391
          },
          {
            lat: 55.821459949784604,
            lng: -4.287038950750152
          },
          {
            lat: 55.82162871035799,
            lng: -4.287006764241974
          },
          {
            lat: 55.82181253800675,
            lng: -4.286947755643646
          },
          {
            lat: 55.82202047315273,
            lng: -4.286904840299408
          },
          {
            lat: 55.822159095965986,
            lng: -4.286872653791229
          },
          {
            lat: 55.82230374533148,
            lng: -4.286824374028961
          },
          {
            lat: 55.822454421182,
            lng: -4.286781458684723
          },
          {
            lat: 55.82261112344748,
            lng: -4.2867600010126035
          },
          {
            lat: 55.822752757644416,
            lng: -4.286700992414276
          },
          {
            lat: 55.82292452608501,
            lng: -4.286641015915449
          },
          {
            lat: 55.82307821299429,
            lng: -4.28660882940727
          },
          {
            lat: 55.82324093964827,
            lng: -4.286544456390913
          },
          {
            lat: 55.8234337999864,
            lng: -4.286480083374555
          },
          {
            lat: 55.82365076672399,
            lng: -4.2864264391942575
          },
          {
            lat: 55.82378872656238,
            lng: -4.28637279501396
          },
          {
            lat: 55.823987610970235,
            lng: -4.28635670175987
          },
          {
            lat: 55.82416540071657,
            lng: -4.286313786415632
          },
          {
            lat: 55.82431606935706,
            lng: -4.286238684563215
          },
          {
            lat: 55.82449988430823,
            lng: -4.286185040382917
          },
          {
            lat: 55.824692738405346,
            lng: -4.28612066736656
          },
          {
            lat: 55.824843405003485,
            lng: -4.28610457411247
          },
          {
            lat: 55.82497900444289,
            lng: -4.286077752022321
          },
          {
            lat: 55.82511159010441,
            lng: -4.2860026501699044
          },
          {
            lat: 55.82528033483823,
            lng: -4.285922183899458
          },
          {
            lat: 55.825889458041395,
            lng: -4.2857022427602365
          },
          {
            lat: 55.82620283426952,
            lng: -4.285466208366926
          },
          {
            lat: 55.82667289387826,
            lng: -4.285165800957258
          },
          {
            lat: 55.82701036906874,
            lng: -4.284886851219709
          },
          {
            lat: 55.82738399890017,
            lng: -4.284543528465803
          },
          {
            lat: 55.82772089375342,
            lng: -4.282243251800537
          },
          {
            lat: 55.82839639718028,
            lng: -4.2813570641561105
          },
          {
            lat: 55.828667570816734,
            lng: -4.280938639549787
          },
          {
            lat: 55.828390371077965,
            lng: -4.280262722878034
          },
          {
            lat: 55.82813727393906,
            lng: -4.279640450386579
          },
          {
            lat: 55.828040855548196,
            lng: -4.279490246681745
          },
          {
            lat: 55.828221639835036,
            lng: -4.279157652763899
          },
          {
            lat: 55.827944436918294,
            lng: -4.278513922600324
          },
          {
            lat: 55.827745572739374,
            lng: -4.278149142174299
          },
          {
            lat: 55.82765517959465,
            lng: -4.277998938469465
          },
          {
            lat: 55.827528628839154,
            lng: -4.277795090584333
          },
          {
            lat: 55.827396051415626,
            lng: -4.2774624966664865
          },
          {
            lat: 55.8272273158594,
            lng: -4.276700749306257
          },
          {
            lat: 55.82697363697373,
            lng: -4.276975393295288
          },
          {
            lat: 55.82724561183482,
            lng: -4.276168633747202
          },
          {
            lat: 55.827402294801864,
            lng: -4.2755463612557465
          },
          {
            lat: 55.82749871477561,
            lng: -4.27496700410853
          },
          {
            lat: 55.827667449154546,
            lng: -4.274430562305551
          },
          {
            lat: 55.82768473649781,
            lng: -4.271643161773682
          },
          {
            lat: 55.82777592086876,
            lng: -4.270847131061655
          },
          {
            lat: 55.82773976366428,
            lng: -4.270181943225961
          },
          {
            lat: 55.827214689116296,
            lng: -4.268252849578857
          },
          {
            lat: 55.82727163372594,
            lng: -4.268124626744367
          },
          {
            lat: 55.82726410088013,
            lng: -4.268017338383771
          },
          {
            lat: 55.82725054175399,
            lng: -4.267899321187116
          },
          {
            lat: 55.827241502333955,
            lng: -4.267800079453565
          },
          {
            lat: 55.827227943199894,
            lng: -4.26767133342085
          },
          {
            lat: 55.827206851204245,
            lng: -4.26755599843321
          },
          {
            lat: 55.82718425262478,
            lng: -4.267408476937391
          },
          {
            lat: 55.827167680324855,
            lng: -4.26729314194975
          },
          {
            lat: 55.82714809487035,
            lng: -4.26716707812605
          },
          {
            lat: 55.82713026768832,
            lng: -4.267065602307962
          },
          {
            lat: 55.827107669064354,
            lng: -4.266955631738352
          },
          {
            lat: 55.82708808357963,
            lng: -4.26687248325889
          },
          {
            lat: 55.827076030968755,
            lng: -4.266794699197458
          },
          {
            lat: 55.827122734815106,
            lng: -4.266727643972086
          },
          {
            lat: 55.827158892593154,
            lng: -4.266628402238535
          },
          {
            lat: 55.82720107662502,
            lng: -4.266566711431192
          },
          {
            lat: 55.8272583263094,
            lng: -4.2664862451607455
          },
          {
            lat: 55.82731557590954,
            lng: -4.2663870034271945
          },
          {
            lat: 55.82736529259915,
            lng: -4.266287761693643
          },
          {
            lat: 55.82742254204186,
            lng: -4.266204613214182
          },
          {
            lat: 55.82749184388605,
            lng: -4.266100007062601
          },
          {
            lat: 55.82752348164344,
            lng: -4.266008811956095
          },
          {
            lat: 55.82754909314249,
            lng: -4.265890794759439
          },
          {
            lat: 55.82766201305137,
            lng: -4.2657994718277825
          },
          {
            lat: 55.82776897823103,
            lng: -4.265719005557336
          },
          {
            lat: 55.8278367729109,
            lng: -4.265673408004083
          },
          {
            lat: 55.82789251511474,
            lng: -4.265609034987725
          },
          {
            lat: 55.8279708553743,
            lng: -4.265555390807427
          },
          {
            lat: 55.82804316932,
            lng: -4.265482971164025
          },
          {
            lat: 55.828103430838716,
            lng: -4.265402504893578
          },
          {
            lat: 55.82817273146983,
            lng: -4.265340814086236
          },
          {
            lat: 55.828240525446,
            lng: -4.265284487696923
          },
          {
            lat: 55.82829777360054,
            lng: -4.265214750262536
          },
          {
            lat: 55.828370086938456,
            lng: -4.265134283992089
          },
          {
            lat: 55.82847855669328,
            lng: -4.265016266795434
          },
          {
            lat: 55.828564428368004,
            lng: -4.264922389479913
          },
          {
            lat: 55.828638247726275,
            lng: -4.264823147746362
          },
          {
            lat: 55.82871959950991,
            lng: -4.264769503566064
          },
          {
            lat: 55.82882053574564,
            lng: -4.264595159980096
          },
          {
            lat: 55.828903393653846,
            lng: -4.264503964873589
          },
          {
            lat: 55.828989264390614,
            lng: -4.264410087558068
          },
          {
            lat: 55.82907664143699,
            lng: -4.264329621287621
          },
          {
            lat: 55.82917456375569,
            lng: -4.26423037955407
          },
          {
            lat: 55.82923633001453,
            lng: -4.264160642119683
          },
          {
            lat: 55.82931316107766,
            lng: -4.264082858058251
          },
          {
            lat: 55.82937944657881,
            lng: -4.264042624923028
          },
          {
            lat: 55.82945175790576,
            lng: -4.263964840861596
          },
          {
            lat: 55.8295346144693,
            lng: -4.263897785636224
          },
          {
            lat: 55.82961144494324,
            lng: -4.263833412619866
          },
          {
            lat: 55.82970801263518,
            lng: -4.263775725058278
          },
          {
            lat: 55.82976977804689,
            lng: -4.26372744529601
          },
          {
            lat: 55.829837569239544,
            lng: -4.263671118906697
          },
          {
            lat: 55.829936996108344,
            lng: -4.263614792517385
          },
          {
            lat: 55.83006214691321,
            lng: -4.263558262538747
          },
          {
            lat: 55.83016759903581,
            lng: -4.263467067432241
          },
          {
            lat: 55.83030920572211,
            lng: -4.263408058833913
          },
          {
            lat: 55.83045683767593,
            lng: -4.263322228145436
          },
          {
            lat: 55.83061350770789,
            lng: -4.263257855129079
          },
          {
            lat: 55.83079428003748,
            lng: -4.263214939784841
          },
          {
            lat: 55.830969025824096,
            lng: -4.263113015842275
          },
          {
            lat: 55.831161847849906,
            lng: -4.263086193752126
          },
          {
            lat: 55.831504122176284,
            lng: -4.26306544089885
          },
          {
            lat: 55.83187168328014,
            lng: -4.263162000423386
          },
          {
            lat: 55.83221513887698,
            lng: -4.263365848308518
          },
          {
            lat: 55.83252243868211,
            lng: -4.263687713390305
          },
          {
            lat: 55.83276948186283,
            lng: -4.263945205455735
          },
          {
            lat: 55.83293819337712,
            lng: -4.264277799373581
          },
          {
            lat: 55.83314908174076,
            lng: -4.264685495143845
          },
          {
            lat: 55.83329369024345,
            lng: -4.265179021602585
          },
          {
            lat: 55.833426247565214,
            lng: -4.265651090389206
          },
          {
            lat: 55.83348650074394,
            lng: -4.265844209438279
          },
          {
            lat: 55.833583674192006,
            lng: -4.2662733628806615
          },
          {
            lat: 55.83364995241516,
            lng: -4.266713245159104
          },
          {
            lat: 55.833728281078685,
            lng: -4.267174585109665
          },
          {
            lat: 55.83381263484762,
            lng: -4.267453534847214
          },
          {
            lat: 55.833860836919136,
            lng: -4.267753942256882
          },
          {
            lat: 55.83420427494933,
            lng: -4.267664074377723
          },
          {
            lat: 55.834361288695064,
            lng: -4.267599005662787
          },
          {
            lat: 55.834520955575464,
            lng: -4.267550725900519
          },
          {
            lat: 55.83466857154204,
            lng: -4.267470259630072
          },
          {
            lat: 55.834677609236095,
            lng: -4.267346878015387
          },
          {
            lat: 55.834635433312606,
            lng: -4.2670679282778385
          },
          {
            lat: 55.834614345333726,
            lng: -4.266826529466498
          },
          {
            lat: 55.83458421962977,
            lng: -4.266585130655158
          },
          {
            lat: 55.834569156769014,
            lng: -4.266322274171698
          },
          {
            lat: 55.83452698072792,
            lng: -4.265930671655524
          },
          {
            lat: 55.834412420387096,
            lng: -4.26618754863739
          },
          {
            lat: 55.83451794299888,
            lng: -4.265957493745673
          },
          {
            lat: 55.83450890526774,
            lng: -4.26577510353266
          },
          {
            lat: 55.83451191784501,
            lng: -4.265587348901618
          },
          {
            lat: 55.83456011904979,
            lng: -4.265458602868903
          },
          {
            lat: 55.83473183535619,
            lng: -4.265463967286933
          },
          {
            lat: 55.834882463070855,
            lng: -4.265458602868903
          },
          {
            lat: 55.83490957599755,
            lng: -4.265748281442511
          },
          {
            lat: 55.83499392720409,
            lng: -4.266118426286567
          },
          {
            lat: 55.83509032835897,
            lng: -4.266617317163337
          },
          {
            lat: 55.83516262906832,
            lng: -4.266933817827094
          },
          {
            lat: 55.83522890460044,
            lng: -4.267180581056464
          },
          {
            lat: 55.83527710491649,
            lng: -4.267448801957953
          },
          {
            lat: 55.83531928014403,
            lng: -4.267690200769294
          },
          {
            lat: 55.83534036774065,
            lng: -4.267963786088813
          },
          {
            lat: 55.83537350536936,
            lng: -4.268221278154242
          },
          {
            lat: 55.83540965547759,
            lng: -4.268462676965583
          },
          {
            lat: 55.83544768552645,
            lng: -4.268811364137519
          },
          {
            lat: 55.835516973072174,
            lng: -4.269101042711127
          },
          {
            lat: 55.8356013229612,
            lng: -4.2693156194323185
          },
          {
            lat: 55.8357067600652,
            lng: -4.26953019615351
          },
          {
            lat: 55.83574592234529,
            lng: -4.269621391260016
          },
          {
            lat: 55.83597788273413,
            lng: -4.26928343292414
          },
          {
            lat: 55.83610139354547,
            lng: -4.269084949457038
          },
          {
            lat: 55.83617971727133,
            lng: -4.268929381334174
          },
          {
            lat: 55.83632130206778,
            lng: -4.268709440194953
          },
          {
            lat: 55.83644782421562,
            lng: -4.268505592309821
          },
          {
            lat: 55.836587511056514,
            lng: -4.268338160301883
          },
          {
            lat: 55.83672608196261,
            lng: -4.268241600777347
          },
          {
            lat: 55.83682549122148,
            lng: -4.268086032654483
          },
          {
            lat: 55.83696104889216,
            lng: -4.267887549187381
          },
          {
            lat: 55.8372123965151,
            lng: -4.267697443422551
          },
          {
            lat: 55.83735096519432,
            lng: -4.267557968553777
          },
          {
            lat: 55.83749555807222,
            lng: -4.267354120668645
          },
          {
            lat: 55.83764918741587,
            lng: -4.267187823709722
          },
          {
            lat: 55.837844988640676,
            lng: -4.267042984422917
          },
          {
            lat: 55.837959456592344,
            lng: -4.266833772119756
          },
          {
            lat: 55.838079948808975,
            lng: -4.26673721259522
          },
          {
            lat: 55.8381281455911,
            lng: -4.266935696062322
          },
          {
            lat: 55.838149231664474,
            lng: -4.267128815111394
          },
          {
            lat: 55.838206465234585,
            lng: -4.267402400430913
          },
          {
            lat: 55.838278760150104,
            lng: -4.267949571069951
          },
          {
            lat: 55.83819864644212,
            lng: -4.268631033914305
          },
          {
            lat: 55.838168523514916,
            lng: -4.268877797143675
          },
          {
            lat: 55.83812032678287,
            lng: -4.269188933389403
          },
          {
            lat: 55.838090203795,
            lng: -4.269424967782713
          },
          {
            lat: 55.83804803157276,
            lng: -4.269779019372679
          },
          {
            lat: 55.837987785461664,
            lng: -4.269950680749632
          },
          {
            lat: 55.83796971161012,
            lng: -4.270240359323241
          },
          {
            lat: 55.83793958850557,
            lng: -4.270369105355956
          },
          {
            lat: 55.837921514631645,
            lng: -4.270605139749266
          },
          {
            lat: 55.837909465377685,
            lng: -4.2708948183228745
          },
          {
            lat: 55.837861268324524,
            lng: -4.271173768060423
          },
          {
            lat: 55.83781909585397,
            lng: -4.2714956331422105
          },
          {
            lat: 55.83778294798569,
            lng: -4.2716458368470445
          },
          {
            lat: 55.83772872612024,
            lng: -4.271785311715819
          },
          {
            lat: 55.837740775430206,
            lng: -4.271978430764891
          },
          {
            lat: 55.837764874038946,
            lng: -4.272225193994261
          },
          {
            lat: 55.83778294798569,
            lng: -4.2728473042500115
          },
          {
            lat: 55.83791549000512,
            lng: -4.273308644200573
          },
          {
            lat: 55.837993810076966,
            lng: -4.273555407429943
          },
          {
            lat: 55.83812032678287,
            lng: -4.273780712987194
          },
          {
            lat: 55.83831913791753,
            lng: -4.274102578068981
          },
          {
            lat: 55.83863843852159,
            lng: -4.274649748708019
          },
          {
            lat: 55.83817495685926,
            lng: -4.274561405181885
          },
          {
            lat: 55.83904207892891,
            lng: -4.27544689339294
          },
          {
            lat: 55.839127927281126,
            lng: -4.275615872560878
          },
          {
            lat: 55.83922130597536,
            lng: -4.275833131491084
          },
          {
            lat: 55.83929209290053,
            lng: -4.276004792868037
          },
          {
            lat: 55.83939300169875,
            lng: -4.276163043199916
          },
          {
            lat: 55.8394878858522,
            lng: -4.276361526667018
          },
          {
            lat: 55.83959815726039,
            lng: -4.27657738518224
          },
          {
            lat: 55.83965990696551,
            lng: -4.27670881342397
          },
          {
            lat: 55.83975930872385,
            lng: -4.276912661309102
          },
          {
            lat: 55.83986624063465,
            lng: -4.277121873612264
          },
          {
            lat: 55.83991816981289,
            lng: -4.277257270693131
          },
          {
            lat: 55.83998594331639,
            lng: -4.27739942777092
          },
          {
            lat: 55.840232939084885,
            lng: -4.277337736963577
          },
          {
            lat: 55.84031125448872,
            lng: -4.2773109148734285
          },
          {
            lat: 55.840546199753696,
            lng: -4.277214355348892
          },
          {
            lat: 55.840741076606605,
            lng: -4.277117795824356
          },
          {
            lat: 55.84083294538283,
            lng: -4.277080244898148
          },
          {
            lat: 55.84095192265566,
            lng: -4.277048058389969
          },
          {
            lat: 55.841258462026985,
            lng: -4.27690674066073
          },
          {
            lat: 55.84150996776411,
            lng: -4.276810181136194
          },
          {
            lat: 55.84171930363394,
            lng: -4.2767055749846135
          },
          {
            lat: 55.841857856251636,
            lng: -4.27665997743136
          },
          {
            lat: 55.842145928551155,
            lng: -4.276532547011285
          },
          {
            lat: 55.84242453623397,
            lng: -4.276406483187585
          },
          {
            lat: 55.84251640103221,
            lng: -4.2763635678433465
          },
          {
            lat: 55.842705692449876,
            lng: -4.276261643900781
          },
          {
            lat: 55.842811110290015,
            lng: -4.2762375040196465
          },
          {
            lat: 55.84288038471506,
            lng: -4.276207999720483
          },
          {
            lat: 55.843091745195586,
            lng: -4.276124851241021
          },
          {
            lat: 55.84322426911809,
            lng: -4.276057796015649
          },
          {
            lat: 55.84336884015471,
            lng: -4.276004151835351
          },
          {
            lat: 55.843570636327655,
            lng: -4.2759049101018
          },
          {
            lat: 55.843751681502646,
            lng: -4.275843219294457
          },
          {
            lat: 55.843879685398626,
            lng: -4.275794939532189
          },
          {
            lat: 55.84413719784184,
            lng: -4.275684968962579
          },
          {
            lat: 55.84441127353902,
            lng: -4.275572316183953
          },
          {
            lat: 55.84459800532484,
            lng: -4.275497214331536
          },
          {
            lat: 55.84470204871234,
            lng: -4.275248050689697
          },
        ],
        bikes: [],
      }
    },
    mounted() {
      this.initialize();
    },
    methods: {
      addMarker(eachbike, map) {
        // Add the marker at the clicked location, and add the next-available label
        // from the array of alphabetical characters.
        var bikeloc = new google.maps.LatLng(eachbike.Home_location_lat, eachbike.Home_location_long);
        var image = 'http://maps.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';
        const marker = new google.maps.MarkerWithLabel({
          position: bikeloc,
          map: map,
          icon: image,
          labelContent: String(eachbike.ID),
          labelAnchor: new google.maps.Point(10, 50),
          labelClass: "",
          labelStyle: {
            fontSize: "10px",
            lineHeight: "14px",
            padding: "2px",
            backgroundColor: 'gray',
            color: 'white'
          }
        });
        var infowindow = new google.maps.InfoWindow({
          content: "ID:" + eachbike.ID + '<br />' + "Lat:" + eachbike.Home_location_lat + '<br />' + "Lon:" +
            eachbike.Home_location_long
        });
        /*choose the bike to show information*/
        var Selectedinfo = {
          ID: String(eachbike.ID),
          Lat: String(eachbike.Home_location_lat),
          Lon: String(eachbike.Home_location_long)
        }
        /**/
        marker.addListener("click", () => {
          infowindow.open(map, marker);
        });
      },
      traceroute(Coordinates, map) {
        let that = this;
        that.fake_Coordinates=[];
        const flightPath = new google.maps.Polyline({
          path: that.fake_Coordinates,
          geodesic: true,
          strokeColor: "red" ,
          strokeOpacity: 0.6,
          strokeWeight: 5,
        });
        flightPath.setMap(map);
        const marker_start = new google.maps.Marker({
          position: Coordinates[0],
          map: map,
          icon: 'http://www.google.com/mapfiles/dd-start.png'
        });

        const trace_marker = new google.maps.Marker({
          draggable: true, //marker is draggable
          animation: google.maps.Animation.DROP,
          icon: ""
        });

        var refresh_time = 20; //every 200ms update one point
        for (let i = 0; i < Coordinates.length; i++) {
          setTimeout(function() {
            trace_marker.setMap(null);
            that.fake_Coordinates.push(Coordinates[i]);
            flightPath.setPath(that.fake_Coordinates)
            trace_marker.setPosition(Coordinates[i]);
            trace_marker.setMap(map);
          }, refresh_time * (i + 1));
        }
        setTimeout(function() {
          const marker_end = new google.maps.Marker({
            position: Coordinates[Coordinates.length - 1],
            map: map,
            icon: 'http://www.google.com/mapfiles/dd-end.png'
          });
          trace_marker.setMap(null);
        }, refresh_time * (Coordinates.length + 1));
      },
      async initialize() {
        var mapProp = {
          center: new google.maps.LatLng(55.835, -4.277),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        this.map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
        let that = this;
        await this.$axios.get(this.$baseURL+'/operator/track/').then(function(res) {
          console.log(res.data.length);
          for (var i = 0; i < res.data.length; i++) {
            that.bikeids.push({
              value: res.data[i].pk
            });
            that.bikes.push({
              ID: res.data[i].pk,
              Home_location_lat: res.data[i].fields.Loc_lat,
              Home_location_long: res.data[i].fields.Loc_long
            })
          }
        }).catch(function(error) {
          console.log(error);
        })
        setTimeout(() => {
          for (var i = 0; i < this.$data.bikes.length; i++) {
            var eachbike = this.$data.bikes[i]
            this.addMarker(eachbike, this.map)
          }
        }, 400);
      },
      showdata() {
        let that=this
        var fdata = qs.stringify({
                  "bike_id": this.bikeId,
                  "Latitude": this.flightPlanCoordinates[this.flightPlanCoordinates.length-1].lat,
                  "Longitude": this.flightPlanCoordinates[this.flightPlanCoordinates.length-1].lng
                })
        this.$axios.post(this.$baseURL+'/operator/trackbike/',fdata)
          .then(function(res) {
            console.log(res);
            that.$message.success(res.data)
          }).catch(function(err) {
            console.log(err);
          })
        this.traceroute(this.flightPlanCoordinates, this.map);
      }
    }
  }
</script>
<style>
  .lt {
    font-size: 14px;
    color: #808080;
    vertical-align: middle;
    padding: 10px 0 0;
  }
</style>
<style scoped>
  .el-card {
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15) !important;
  }
</style>
